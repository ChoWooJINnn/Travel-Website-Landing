<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>1대1 대화</title>
    <style>
        .Chat {
            position: fixed;
            right: 15px;
            bottom: 15px;
            width: 80px;
            height: 80px;
            z-index: 99;
        }
        .chat-popup {
            display: none;
            position: fixed;
            bottom: 100px;
            right: 15px;
            width: 400px;
            height: 600px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
    </style>
</head>
<body>
    <a href="#" onclick="openChat(event)"><img class="Chat" src="./favicon.png" alt="logo"/></a>

    <div id="chatPopup" class="chat-popup">
        <!-- 동적추가 -->
    </div>

    <script>
        //버튼을 눌렀을때 나오는 채팅창
        function openChat(event) {
            event.preventDefault();
            const chatPopup = document.getElementById('chatPopup');
            const chatContent = `
                <div class="chat-container">
                    <header class="chat-header">
                        1:1 Chatting System
                    </header>
                    <div class="chat-body" id="chatBody">
                        <div class="message received">
                            <p>도와드릴게 있을까요?</p>
                        </div>
                        <div class="message sent">
                            <p>질문이 있습니다</p>
                        </div>
                    </div>
                    <footer class="chat-footer">
                        <input type="text" placeholder="메세지를 입력하세요" id="chatInput" />
                        <button type="button" onclick="sendMessage()">전송</button>
                    </footer>
                </div>
            `;

            chatPopup.innerHTML = chatContent;
            chatPopup.style.display = 'block';

            //css 추가
            const style = document.createElement('style');
            style.innerHTML = `
                body {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                    background-color: #f4f4f9;
                }

                .chat-container {
                    display: flex;
                    flex-direction: column;
                    justify-content: space-between;
                    width: 100%;
                    height: 100%;
                }

                .chat-header {
                    padding: 16px;
                    background-color: #007bff;
                    color: #fff;
                    border-radius: 8px 8px 0 0;
                    text-align: center;
                }

                .chat-body {
                    padding: 16px;
                    overflow-y: auto;
                    flex-grow: 1;
                    border-bottom: 1px solid #ddd;
                }

                .chat-footer {
                    display: flex;
                    padding: 16px;
                    background-color: #f4f4f9;
                    border-radius: 0 0 8px 8px;
                }

                .chat-footer input[type="text"] {
                    flex-grow: 1;
                    margin-right: 8px;
                    padding: 8px;
                    border: 1px solid #ddd;
                    border-radius: 4px;
                }

                .chat-footer button {
                    padding: 8px 16px;
                    background-color: #007bff;
                    color: #fff;
                    border: none;
                    border-radius: 4px;
                }

                .message {
                    margin-bottom: 12px;
                }

                .message.sent {
                    text-align: right;
                }

                .message.received {
                    text-align: left;
                }

                .message p {
                    display: inline-block;
                    padding: 8px 12px;
                    border-radius: 12px;
                    background-color: #007bff;
                    color: #fff;
                    margin: 0;
                }

                .message.received p {
                    background-color: #f4f4f9;
                    color: #000;
                }
            `;
            document.head.appendChild(style);

            const chatInput = document.getElementById('chatInput');
            chatInput.addEventListener('keydown', function(event) {
                if (event.key === 'Enter') {
                    sendMessage();
                }
            });
        }

        function sendMessage() {
            const chatBody = document.getElementById('chatBody');
            const chatInput = document.getElementById('chatInput');
            const message = chatInput.value;

            if (message.trim() !== '') {
                const messageElement = document.createElement('div');
                messageElement.classList.add('message', 'sent');
                messageElement.innerHTML = `<p>${message}</p>`;
                chatBody.appendChild(messageElement);
                chatInput.value = '';
                chatBody.scrollTop = chatBody.scrollHeight;
            }
        }
    </script>
</body>
</html>
